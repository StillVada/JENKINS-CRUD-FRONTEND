<div class="product-form-container">
  <div class="header">
    <h1>{{ isEditMode() ? 'Edit Product' : 'Create New Product' }}</h1>
    <button class="btn btn-secondary" (click)="onCancel()" [disabled]="saving()">Cancel</button>
  </div>

  @if (loading()) {
    <div class="loading">Loading product...</div>
  } @else {
    @if (error()) {
      <div class="error">
        <p>{{ error() }}</p>
      </div>
    }

    <form [formGroup]="productForm" (ngSubmit)="onSubmit()" class="product-form">
      <div class="form-group">
        <label for="name">Product Name *</label>
        <input
          type="text"
          id="name"
          formControlName="name"
          class="form-control"
          [class.error]="isFieldInvalid('name')"
          placeholder="Enter product name">
        @if (isFieldInvalid('name')) {
          <div class="error-message">{{ getFieldError('name') }}</div>
        }
      </div>

      <div class="form-group">
        <label for="description">Description *</label>
        <textarea
          id="description"
          formControlName="description"
          class="form-control"
          [class.error]="isFieldInvalid('description')"
          rows="4"
          placeholder="Enter product description"></textarea>
        @if (isFieldInvalid('description')) {
          <div class="error-message">{{ getFieldError('description') }}</div>
        }
      </div>

      <div class="form-group">
        <label for="price">Price *</label>
        <input
          type="number"
          id="price"
          formControlName="price"
          class="form-control"
          [class.error]="isFieldInvalid('price')"
          placeholder="0.00"
          step="0.01"
          min="0">
        @if (isFieldInvalid('price')) {
          <div class="error-message">{{ getFieldError('price') }}</div>
        }
      </div>

      <div class="form-actions">
        <button type="button" class="btn btn-secondary" (click)="onCancel()" [disabled]="saving()">
          Cancel
        </button>
        <button type="submit" class="btn btn-primary" [disabled]="saving() || productForm.invalid">
          @if (saving()) {
            {{ isEditMode() ? 'Updating...' : 'Creating...' }}
          } @else {
            {{ isEditMode() ? 'Update Product' : 'Create Product' }}
          }
        </button>
      </div>
    </form>
  }
</div>
